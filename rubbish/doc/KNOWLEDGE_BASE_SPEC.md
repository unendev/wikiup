# 知识库内容规范 (Knowledge Base Specification) V1.0

## 1. 概述

本文档定义了向本项目添加新知识内容的统一标准。所有提交至知识库的文档**必须**遵守此规范，以确保数据的一致性、可维护性，并保证后端程序能正确解析。

---

## 2. 文件与目录结构

- **根目录:** 所有知识库源文件必须存放于项目根目录下的 `data/` 文件夹中。
- **子目录:** 建议使用子目录对知识进行分类。分类方式应基于知识本身的逻辑层次，例如：
  - `data/dont-starve/creatures/` (用于存放生物类知识)
  - `data/dont-starve/items/` (用于存放物品类知识)
  - `data/dont-starve/mechanics/` (用于存放游戏机制类知识)
- **文件名:**
  - 必须使用 **英文小写字母**。
  - 单词之间使用 **连字符 (`-`)** 连接。
  - 文件扩展名必须是 `.md`。
  - **示例:** `chester.md`, `shadow-pieces.md`

---

## 3. 文件格式

- **编码:** 所有文件必须使用 `UTF-8` 编码。
- **格式:** 所有文件必须是标准的 Markdown 格式。

---

## 4. 内容结构 (Markdown 规范)

正确的结构是保证内容被程序准确切片和索引的关键。

- **一级标题 (`#`)**:
  - 每个文件**必须有且仅有一个**一级标题。
  - 内容应为知识主题的通用名称，推荐格式为 `中文名 (英文名)`。
  - **示例:** `# 牛 (Beefalo)`

- **二级标题 (`##`)**:
  - 用于划分文档的主要逻辑章节。
  - **示例:** `## 简介`, `## 行为`, `## 掉落物`

- **三级及以下标题 (`###`, `####`, ...)**:
  - 用于在主章节下创建更细分的子章节。
  - 系统的解析器会根据从一级到当前标题的完整路径，生成来源信息的"面包屑导航"，例如 `牛 (Beefalo) > 行为 > 发情期`。

- **正文内容**:
  - 使用标准、清晰的 Markdown 语法编写。
  - 尽量保持段落简洁，每个段落集中讨论一个要点，这有助于提高信息检索的准确性。

---

## 5. 元数据 (YAML Frontmatter)

每个 Markdown 文件的**最顶部**，必须包含一个由 `---` 包裹的 YAML 元数据块。

```yaml
---
name: "Beefalo"
type: "Creature"
game: "Don't Starve"
attributes:
  health: 500
  damage: 34
  attack_period: 3
---
```

- ### 必填字段:
  - `name` (字符串): 知识主题的英文名称，应与文件名保持逻辑一致。
    - 示例: `"Beefalo"`
  - `type` (字符串): 知识的分类。建议使用统一的分类名，如 `Creature`, `Item`, `Character`, `Mechanic`。
    - 示例: `"Creature"`
  - `game` (字符串): 所属的游戏或领域。
    - 示例: `"Don't Starve"`

- ### 可选字段:
  - `attributes` (字典): 用于定义该主题的结构化属性（键值对）。这是结构化数据的**唯一事实来源 (Single Source of Truth)**。
    - 示例: `health: 500`
  - 未来可以根据需要扩展其他任意自定义字段。

- ### `[新增]` 5.1 结构化数据与正文描述的关系 (重要)
  - **原则**: YAML中的`attributes`是结构化数据的“事实来源”，而正文中的描述是供AI和人类阅读的“人性化展示”。
  - **规范**:
    - **必须**将所有可结构化的关键数值（如生命、伤害、速度等）定义在`attributes`中。
    - **推荐**在正文部分的摘要或简介中，用自然语言将最重要的几个属性进行描述（例如：“牛的生命值为500，伤害为34点。”）。这种“冗余”是为了优化RAG中“生成”环节的上下文质量，使AI能生成更流畅的回答。
    - 更新数据时，应以YAML中的`attributes`为准。正文的描述应随之更新，以保持一致。 